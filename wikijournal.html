<!-- HTML comments syntax -->

<div class="b1">
Wilson's Journal
</div>

{{Vspace}}

__TOC__

{{Vspace}}

=2 Basic R=
==2.2 Vector Objects==

<div class="time-estimate">
Time estimated: 1.5 h; taken 100 min; date started: 2019-10-06; date completed: 2019-10-07

~~~~
</div>

===2.2.1 R Commands that may be helpful and used often===
;'''objectInfo(<object>): (specially defined function only in R_Exercise-BasicSetup.R): After init(), this function is defined and it returns mode(), typeof(), and class() of the <code><object></code>'''
;It also gives data structure of the object?

;seq(from, to, by): Generates a sequence

;summary(x): summary of x=<object> (e.g. If x is a vector, then it returns basic statistics on this vector such as mean, median etc.)

===2.2.2 Scalars ===
;single valued, but by construction, it's also a vector of length of 1
: e.g. length() and indexing will work

;Objects can have mode, type, and class.

;Important notes:
:* ;An (apparent) integer is by default a double-precision float! To get integer type and class, one has to have <code><integer>L</code>. An alternative is to coerce it into an integer.
:* ;However, integers obtained from range operators (e.g. <code>1:10</code>, which returns a vector) are actual integers!
:* <span style="color:red">'''R indexing starts at 1!!!'''</span>

;Coercion:
:* The names of functions are self-explanatory. Check with objectInfo() if needed: '''as.numeric(), as.character(), as.complex()'''
:* Note that as.numeric("pi") is silly and won't work -- It gives NA (<code>objectInfo(NA)</code> indicates <code>NA</code> is of mode logical, type logical, and class logical)
:* as.logical(x) will return FALSE if x == 0, elif it will return TRUE if x != 0 and x is numeric, else (e.g. if x is a string) will return NA.
:* <code>NaN</code> means "not a number", though it is of mode numeric, type double, and class numeric. '''<code>as.logical(NaN)</code> returns NA.'''
:* <code>NULL</code> means "nothing" or "undefined". It is of mode NULL, type NULL, and class NULL (basically just nothing). e.g. <code>as.logical(NULL)</code> will be the same as <code>as.logical()</code>
:* '''as.factor(x)''' encodes vector x as factor? (back to this later)


===2.2.3 Vectors===
;An ordered array of objects of the same type

;A general way to generate a vector: c() (link to the function on this page?)

;Subsetting:
:* Indexing: e.g. x[1:10], x[5:1], x[seq(1,10,2)]
:* <span style="color:red">'''Negative indices deserves a special note for R'''</span>: the negative indices are the ones to be omitted.
:* Boolean filtering: e.g. x[x>3]
:* If <code>length(<logical_vector>) < length(<vector>)</code>, the <logical_vector> filter will be re-applied in cyclically on <vector>.
:* Indexing by name if it's a named array: e.g. <code>summary(x)[c("Max.", "Min.")]</code>
:* Retrieve names of a named vector using '''names(x)'''

;Extending:
:* Extending a vector by simply assign a value to a vector index larger than its length: e.g. <code>x[4] <- 4</code> works even if <code>length(x) < 4</code> before assignment.

;Many operations on vectors are by default vectorized! (just like NumPy)
:* Similar behaviour to cyclic boolean filtering, if the two vectors on which the operator acts on have different lengths... e.g. <code>(1:10)*(1:5)</code> is the same as <code>(1:10)/rep(1:5,2)</code>


===2.2.4 Matrices and Tensors?===
;Ways to make a matrix
1) To turn a 1-D vector into a matrix/tensor <array>, assign a vector of dimensions to dim(<array>) (e.g. <code>dim(a) <- c(x, y)</code>; the behaviour is similar to numpy.array.reshape() in Python)

2) Use '''matrix()''' or '''array()'''

3) Using '''rbind(...)''' (row bind) or '''cbind(...)''' (column bind)

;dim(a): dimensions of matrix a.
:* if <code>class(a) != "matrix"</code>, <code>dim(a)</code> will return <code>NULL</code>

;<code>nrow(a) == dim(a)[1]; ncol(a) == dim(a)[2]</code>, ... (slice follows at position 3 of dim(a) for a 3-D array)

; Note that unlike numpy.array subsetting, a comma must be given to the subset index of an R-array to retrieve an entire indexed row. For example:
<source lang="R">
a <- 1:12
dim(a) <- c(2,6)

a[1] #This should give 1, the first element
a[1,] #This should give the first row vector, 1:6

a[6] #Without comma, it takes the element at position 6 as if a is a linearized vector
</source>

==2.1 Basic Syntax==

<div class="time-estimate">
Time estimated: 0.5 h; taken 40 min; date started: 2019-10-05; date completed: 2019-10-06

[[User:Zhi Wei Zeng|Zhi Wei Zeng]] ([[User talk:Zhi Wei Zeng|talk]]) 18:46, 6 October 2019 (EDT)
</div>

===R Commands that may be helpful and used often===
;c(...): concatenates values into a vector (will coerce values into the same type)

;tail(<object>, ...): get the last part of <code><object></code>
:* n=<integer>: get the last <code><integer></code> of <code><object></code>
:* An analogous function: head()

;sample(x, size, replace=FALSE, prob=NULL): randomly sample from elements of <code>x</code>
:* if <code>x</code> is a single numeric >= 1, sample <code>1:x</code> ''(R syntax: <code>x:y</code> means x to y '''inclusive''')''
:* replace=<boolean>: with or without replacement?
:* prob=<vector>: a vector of probability weights


===R syntax practice===
<source lang="R">
numbers <- c(16, 20, 3, 5, 9)
lastnum <- tail(numbers, 1)

(lastnum < 6) | (lastnum > 10) #To check whether lastNum is less than 6 or greater than 10

(lastnum >= 10) & (lastnum < 20) #To check whether lastNum is in the interval [10, 20)

(((((lastnum / 7)*10 - (((lastnum / 7)*10) %/% 1)) / 10) * 100) %/% 1) ^ (1/3) #To output TRUE if the following operation gives 2

#COUNTER-INTUITIVE/STRANGE BEHAVIOUR!!! (lastnum / 7)*10 %/% 1 does not do what I expect it to do
#It does 10 %/% 1 first
#Weird that integer division, while is sort of division, takes priority?
</source>

<span style="color:red"><code>(lastnum / 7)*10 %/% 1</code> does not do what I expect it to do</span>

<span style="color:red">I have to do <code>((lastnum / 7)*10) %/% 1</code></span>

<span style="color:red">Weird that integer division, while is sort of division, takes priority?</span>


===Notes on Variables===
;Can make use of <code>make.names</code> to make syntactically valid variable names from character vectors. See <code>?make.names for more</code>.

;Reserved words for R-parser can be seen in <code>?reserved</code> (e.g. <code>TRUE <- 3</code> won't work)

;Do not re-assign <code>pi</code>!!! Unfortunately it doesn't throw an error.


===Syntax features===
;Just like python, arithmetics in R does not seem to be sensitive to (number of) spaces.

;Unlike python:
:* Booleans (TRUE or FALSE) are case sensitive (RStudio autocorrects)
:* Exponentiation: <code>^</code> (turns out <code>**</code> also works in R)
:* Mod: <code>%%</code>
:* Integer division: <code>%/%</code>
:* Does not support "and" or "or". Only <code>&</code> or <code>|</code>

{{Vspace}}

=1 Preparation for R=
==1.4 Getting Help with R==

<div class="time-estimate">
Time estimated: 0.5 h; taken 20 min; date started: 2019-10-06; date completed: 2019-10-06

[[User:Zhi Wei Zeng|Zhi Wei Zeng]] ([[User talk:Zhi Wei Zeng|talk]]) 11:26, 6 October 2019 (EDT)
</div>

===R Commands that may be helpful and used often===
;help(<item>): get help info for <code><item></code>, which can be function for syntax. If syntax is give as <code><item></code> argument, it should be a string.
:* synonymous to ?<item>

;apropos(<string>): show all functions that contains <code><string>(string)</code>
:* '''Supports regex for the string argument!'''
:* '''Not case sensitive!'''


===For asking further questions...===
;Minimum working example principle

;Required items for a reproducible example[http://adv-r.had.co.nz/Reproducibility.html]:
:* Required packages: should be loaded at the top of the script
:* Code
:* Data
::To include data, recreate the text representation of data by running <code>dput(<object>)</code>, copy the output, and assign it to <code><object></code> by pasting the text representation in the reproducible code (<code><object> <- <pasted_item></code>).
:* R-environment: run <code>sessionInfo()</code> and include its output as a comment in the reproducible code.
:* <code>set.seed()</code> for random processes (reproducible; pseudo-random...)

==1.3 R Scripting==
===R Commands that may be helpful and used often===
;source(<path>): execute the R-script <code><path>(string)</code>

==1.2 Configurations==

<div class="time-estimate">
Time estimated: 1 h; taken 70 min; date started: 2019-10-05; date completed: 2019-10-06

[[User:Zhi Wei Zeng|Zhi Wei Zeng]] ([[User talk:Zhi Wei Zeng|talk]]) 11:26, 6 October 2019 (EDT)
</div>


===R Commands that may be helpful and used often===
;getwd(): get current working directory

;setwd(<path>): set <code><path>(string)</code> as working directory

;list.files(): list files in working directory

;list.dirs(): list sub-directories in working directory

;ls(): list current workspace contents

;rm(<item>): remove an item <code><item></code> from the workspace
:* list=<code><list></code>: remove an array of items in <code><list></code>

;save(<item>): save <code><item></code> into a file
:* file=<code><path>(string)</code>: save the item as <code><path></code>
:* Recommended extension from the website: .RData

;load(<path>): load items saved in <code><path>(string)</code>


===R Workspace===
;Just don't bother restarting from saved workspace... Instead, save objects using <code>save()</code> and <code>load()</code>


===RStudio Project===
;Files created upon creating a project:
:* Project file <code>.Rproj</code>: this contains project options
:* Temporary files <code>.Rproj.user</code>: may be ignored by version control

;Pointers on project options:
:* Option to restore <code>.RData</code> at startup
:* Option to save <code>.RData</code> upon exit
:* Option to save command history at <code>.Rhistory</code> '''(Strongly Recommended)'''
:* Option to set <code><tab></code> as soft tab
:* Specify version control system (i.e. git)

;More info at [https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects this link]

==1.1 Installations==

<div class="time-estimate">
Time estimated: 1 h; taken 3 h; date started: 2019-10-05; date completed: 2019-10-05

[[User:Zhi Wei Zeng|Zhi Wei Zeng]] ([[User talk:Zhi Wei Zeng|talk]]) 20:33, 5 October 2019 (EDT)
</div>

===R Commands that may be helpful and used often===
;library():
:* When no arguments given: list of installed package
:* argument=<code><package></code>: load <code><package></code> (not string! no quotes!)
:* help=<code><package></code>: doc for <code><package></code>

;data():
:* When no arguments given, list of available data sets
:* argument=<code><dataset></code>: load dataset <code><dataset></code>
:* package=<code><package></code>: load/list dataset(s) in <code><package></code>

;search(): list of currently loaded packages

;vignette(): (also doc for a package?)

;Get help by preceding function, package, or library name with <code>?</code>

;Get help by preceding function, package, or library name with <code>??</code> if I have approximate impression for the name of it (e.g. <code>?aaindex</code> will not work but <code>??aaindex</code> will work)

;s2c():
:* argument=<code><string>(string)</code>: convert <string> into vector of constituent characters


===Install seqinr===
<source lang="R">
install.packages("seqinr")
</source>

<div class="toccolours mw-collapsible mw-collapsed" style="width:90%; margin-left: 10px; padding-right: 15px">
'''''Installation messages'''''
<div class="mw-collapsible-content">
<code>
WARNING: Rtools is required to build R packages but is not currently installed. Please download and install the appropriate version of Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/
Installing package into ‘C:/Users/Wilson/Documents/R/win-library/3.6’
(as ‘lib’ is unspecified)
also installing the dependencies ‘ade4’, ‘segmented’

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.6/ade4_1.7-13.zip'
Content type 'application/zip' length 5224910 bytes (5.0 MB)
downloaded 5.0 MB

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.6/segmented_1.0-0.zip'
Content type 'application/zip' length 479928 bytes (468 KB)
downloaded 468 KB

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.6/seqinr_3.6-1.zip'
Content type 'application/zip' length 4162333 bytes (4.0 MB)
downloaded 4.0 MB

package ‘ade4’ successfully unpacked and MD5 sums checked
package ‘segmented’ successfully unpacked and MD5 sums checked
package ‘seqinr’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
C:\Users\Wilson\AppData\Local\Temp\RtmpOCLlIY\downloaded_packages
</code>
</div>
</div>


===Playing with dataset seqinr::aaindex===
;;Seems like we retieve entries of data in the dataset via some rather arbitrary name?

<source lang="R">
?seqinr::aaindex
#This can tell me the following line, which lets me know the index and the name of the data entry
#It also tells me what $H, $J etc. mean when I display a data entry (the third line)

which(sapply(aaindex, function(x) length(grep("Kyte", x$A)) != 0)) #grep() is probably regex filter

aaindex$FASG890101
</source>


===Plot sample data===
<source lang="R">
plot(aaindex$FASG890101$I,
     aaindex$PONJ960101$I,
     xlab="hydrophobicity", ylab="volume", type="n")
text(aaindex$FASG890101$I,
     aaindex$PONJ960101$I,
     labels=a(names(aaindex$FASG890101$I)))
</source>

<div class="toccolours mw-collapsible mw-collapsed" style="width:90%; margin-left: 10px; padding-right: 15px">
<span style="color:red">'''''Error message'''''</span>
<div class="mw-collapsible-content">
<code>Error in a(names(aaindex$FASG890101$I)) : could not find function "a"</code>

Also: there is nothing in the plot. I suspect it doesn't like a or aaindex
</div>
</div>

<div class="toccolours mw-collapsible mw-collapsed" style="width:90%; margin-left: 10px; padding-right: 15px">
<span style="color:green">'''''Solution'''''</span>
<div class="mw-collapsible-content">
Explicitly define <code>seqinr::a</code> and rerun the script resolves the problem.

Turns out <code>aaindex</code> has no problem, as it has already been loaded.

If <code>library(seqinr)</code> was run ahead of time, the original code should work.
</div>
</div>


===Some useful "punchline" codes===
;Avoid error by installing a package if not already installed
<source lang="R">
if (! requireNamespace("seqinr", quietly=TRUE)) {
    install.packages("seqinr")
    }
#requireNamespace(): returns TRUE is installed and vice versa

if (!requireNamespace("BiocManager", quietly = TRUE))
install.packages("BiocManager")
BiocManager::install()
#Bioconductor packages are installed a bit differently

#Packages neither CRAN or Bioconductor: devtools (but the link on the course website is broken)
</source>

;sos package will help me find packages

{{Vspace}}

=0 Getting Started=
=='''''0.2 Plagiarism and Academic Integrity'''''==

===Objective===
: Avoid academic offense and abide courteous academic culture.

===Full Disclosure Policy===
* Anything idea that's not my own has a source that needs to be referenced.
* You can never have too many references.
* APA citation format
* The code should produce the exact results claimed. Otherwise: falsified results
* Reference by commenting in R-code

===Conclusion===

When in doubt, reference it or consult [http://steipe.biochemistry.utoronto.ca/abc/index.php/FND-Wiki_editing this page].

== 0.1 Project: Template for Journal ==

===Objective===
: goal of activity

<div class="time-estimate">
Time estimated: 0.75 h; taken 1 h; date started: 2019-10-03; date completed: 2019-10-03
</div>

===Progress===

;Activity 1
* Procedure: concise but sufficient so that it's reproducible
* Results: static data, variable data, analysis results

;Activity 2
* Cross-referencing with anchors
* Images: compressed; stereo views for images of molecules; should convey what I'm trying to show effectively
* Here's the R-code
<div class="toccolours mw-collapsible mw-collapsed" style="width:90%; margin-left: 10px; padding-right: 15px">
My R code below ...
<div class="mw-collapsible-content">
<source lang="R">
#R-code here
</source>

</div>
</div>


===Conclusion and outlook===

Interpretation of results.

Next step and link to the next step.

{{Vspace}}

----

[[Category:BCH441-2019_Journal]]

----

{{CC-BY}}